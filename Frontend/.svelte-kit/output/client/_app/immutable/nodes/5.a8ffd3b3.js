import{s as st,a as E,f as g,c as C,g as _,h as M,A as H,d as A,j as i,i as O,x as u,C as q,D as V,G as ot,F as nt,l as it,m as lt,n as ut}from"../chunks/scheduler.5fff65fb.js";import{S as ct,i as mt,b as W,d as X,m as Y,a as Z,t as tt,e as et}from"../chunks/index.f20c95b4.js";import{P as dt}from"../chunks/publicFooter.de71edf5.js";import{P as ft}from"../chunks/publicHeader.ba5fbcc9.js";import{p as pt}from"../chunks/parse.bee59afc.js";import{j as ht}from"../chunks/singletons.fd275494.js";import{i as bt,g as gt}from"../chunks/navigation.dbd2a6cd.js";import{l as _t,s as G}from"../chunks/auth.fc3ca823.js";function vt(a){return ht.apply_action(a)}function yt(a){const o=JSON.parse(a);return o.data&&(o.data=pt(o.data)),o}function at(a){return HTMLElement.prototype.cloneNode.call(a)}function wt(a,o=()=>{}){const c=async({action:t,result:p,reset:b=!0,invalidateAll:n=!0})=>{p.type==="success"&&(b&&HTMLFormElement.prototype.reset.call(a),n&&await bt()),(location.origin+location.pathname===t.origin+t.pathname||p.type==="redirect"||p.type==="error")&&vt(p)};async function e(t){var v,y,D,T;if(((v=t.submitter)!=null&&v.hasAttribute("formmethod")?t.submitter.formMethod:at(a).method)!=="post")return;t.preventDefault();const b=new URL((y=t.submitter)!=null&&y.hasAttribute("formaction")?t.submitter.formAction:at(a).action),n=new FormData(a),h=(D=t.submitter)==null?void 0:D.getAttribute("name");h&&n.append(h,((T=t.submitter)==null?void 0:T.getAttribute("value"))??"");const m=new AbortController;let $=!1;const f=await o({action:b,cancel:()=>$=!0,controller:m,get data(){return n},formData:n,get form(){return a},formElement:a,submitter:t.submitter})??c;if($)return;let w;try{const s=await fetch(b,{method:"POST",headers:{accept:"application/json","x-sveltekit-action":"true"},cache:"no-store",body:n,signal:m.signal});w=yt(await s.text()),w.type==="error"&&(w.status=s.status)}catch(s){if((s==null?void 0:s.name)==="AbortError")return;w={type:"error",error:s}}f({action:b,get data(){return n},formData:n,get form(){return a},formElement:a,update:s=>c({action:b,result:w,reset:s==null?void 0:s.reset,invalidateAll:s==null?void 0:s.invalidateAll}),result:w})}return HTMLFormElement.prototype.addEventListener.call(a,"submit",e),{destroy(){HTMLFormElement.prototype.removeEventListener.call(a,"submit",e)}}}function rt(a){let o,c;return{c(){o=g("p"),c=it(a[2]),this.h()},l(e){o=_(e,"P",{class:!0});var t=M(o);c=lt(t,a[2]),t.forEach(A),this.h()},h(){i(o,"class","text-red-500 mt-2")},m(e,t){O(e,o,t),u(o,c)},p(e,t){t&4&&ut(c,e[2])},d(e){e&&A(o)}}}function xt(a){let o,c,e,t,p="Iniciar sesión",b,n,h,m,$="Email:",F,f,w,v,y,D="Contraseña:",T,s,j,x,J="Iniciar Sesión",z,I,k,K='¿No estás registrado? <a href="/registro" class="underline text-blue-500">Registrarse</a>',N,L,S,B,Q;o=new ft({});let d=a[2]&&rt(a);return L=new dt({}),{c(){W(o.$$.fragment),c=E(),e=g("div"),t=g("h2"),t.textContent=p,b=E(),n=g("form"),h=g("div"),m=g("label"),m.textContent=$,F=E(),f=g("input"),w=E(),v=g("div"),y=g("label"),y.textContent=D,T=E(),s=g("input"),j=E(),x=g("button"),x.textContent=J,z=E(),d&&d.c(),I=E(),k=g("p"),k.innerHTML=K,N=E(),W(L.$$.fragment),this.h()},l(r){X(o.$$.fragment,r),c=C(r),e=_(r,"DIV",{class:!0});var l=M(e);t=_(l,"H2",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-pqynkm"&&(t.textContent=p),b=C(l),n=_(l,"FORM",{method:!0,action:!0});var P=M(n);h=_(P,"DIV",{class:!0});var U=M(h);m=_(U,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),H(m)!=="svelte-69pry4"&&(m.textContent=$),F=C(U),f=_(U,"INPUT",{type:!0,id:!0,name:!0,class:!0}),U.forEach(A),w=C(P),v=_(P,"DIV",{class:!0});var R=M(v);y=_(R,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),H(y)!=="svelte-1rd1u2s"&&(y.textContent=D),T=C(R),s=_(R,"INPUT",{type:!0,id:!0,name:!0,class:!0}),R.forEach(A),j=C(P),x=_(P,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),H(x)!=="svelte-1nirnfz"&&(x.textContent=J),P.forEach(A),z=C(l),d&&d.l(l),I=C(l),k=_(l,"P",{class:!0,"data-svelte-h":!0}),H(k)!=="svelte-ahgi8i"&&(k.innerHTML=K),l.forEach(A),N=C(r),X(L.$$.fragment,r),this.h()},h(){i(t,"class","text-2xl font-semibold mb-4"),i(m,"for","email"),i(m,"class","block text-sm font-medium text-gray-700"),i(f,"type","email"),i(f,"id","email"),i(f,"name","email"),i(f,"class","w-full px-4 py-2 mt-2 border rounded-lg focus:outline-none focus:ring focus:border-blue-300"),f.required=!0,i(h,"class","mb-4"),i(y,"for","password"),i(y,"class","block text-sm font-medium text-gray-700"),i(s,"type","password"),i(s,"id","password"),i(s,"name","password"),i(s,"class","w-full px-4 py-2 mt-2 border rounded-lg focus:outline-none focus:ring focus:border-blue-300"),s.required=!0,i(v,"class","mb-4"),i(x,"type","button"),i(x,"class","w-full mt-4 py-2 text-white bg-violeta hover:shadow-md hover:opacity-80 rounded-lg"),i(n,"method","post"),i(n,"action","/login"),i(k,"class","pt-6"),i(e,"class","max-w-md mx-auto mt-40 p-4 min-h-screen")},m(r,l){Y(o,r,l),O(r,c,l),O(r,e,l),u(e,t),u(e,b),u(e,n),u(n,h),u(h,m),u(h,F),u(h,f),q(f,a[0]),u(n,w),u(n,v),u(v,y),u(v,T),u(v,s),q(s,a[1]),u(n,j),u(n,x),u(e,z),d&&d.m(e,null),u(e,I),u(e,k),O(r,N,l),Y(L,r,l),S=!0,B||(Q=[V(f,"input",a[4]),V(s,"input",a[5]),V(x,"click",a[3]),ot(wt.call(null,n))],B=!0)},p(r,[l]){l&1&&f.value!==r[0]&&q(f,r[0]),l&2&&s.value!==r[1]&&q(s,r[1]),r[2]?d?d.p(r,l):(d=rt(r),d.c(),d.m(e,I)):d&&(d.d(1),d=null)},i(r){S||(Z(o.$$.fragment,r),Z(L.$$.fragment,r),S=!0)},o(r){tt(o.$$.fragment,r),tt(L.$$.fragment,r),S=!1},d(r){r&&(A(c),A(e),A(N)),et(o,r),d&&d.d(),et(L,r),B=!1,nt(Q)}}}function Et(a,o,c){let e="",t="",p="";async function b(){try{const{data:m,response:$}=await _t(e,t);console.log("Respuesta del servidor:",$),m?(G.set(m),G.auth_token=m.auth_token,p&&c(2,p="")):c(2,p="Usuario o contraseña incorrectos"),$.ok&&(console.log("Redireccionando a /datos_negocio"),gt("/negocio/rosa"),console.log("Datos del usuario después de redireccionar:",G))}catch(m){console.error("Error al realizar la solicitud:",m)}}function n(){e=this.value,c(0,e)}function h(){t=this.value,c(1,t)}return[e,t,p,b,n,h]}class Ht extends ct{constructor(o){super(),mt(this,o,Et,xt,st,{})}}export{Ht as component};
